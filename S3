S3

S3イベント
バケット内イベントの発生をトリガーにして、SNS/SQS/Lambdaに通知設定が可能。

・Amazon S3に静的ウェブサイトをホスティングできます。この静的ウェブサイトのルーティングをスケーリングする方法としてRoute53と連携させることが必要です。Route53を利用してエイリアスレコードを作成してドメインのホストゾーンに追加し、pintor.com と www.pintor.com を対応する S3 バケットにマッピングします。エイリアスレコードでは、IP アドレスを使用する代わりに、Amazon S3 ウェブサイトエンドポイントを使用します。Amazon Route 53 によって、エイリアスレコードと、Amazon S3 バケットが存在する IP アドレスとのマッピングが維持されます。

Amazon S3 アクセスポイント
S3 の共有データセットへの大規模なデータアクセスの管理を簡素化する機能です。アクセスポイントは、バケットにアタッチされた名前付きのネットワークエンドポイントで、S3 オブジェクトのオペレーション (GetObject や PutObject など) を実行するために使用できます。各アクセスポイントは基になるバケットにアタッチされたバケットポリシーと連動して機能するカスタマイズされたアクセスポイントポリシーを適用してアクセスを制御することが可能です

・S3 の共有データセットへの大規模なデータアクセスの管理を簡素化したり、複数のポリシーに基づく制御をする際は S3 アクセスポイントを利用することが求められます。

Amazon S3 Transfer Acceleration
 を使用すると、クライアントと S3 バケットの間で長距離にわたるファイル転送を高速、簡単、安全に行えるようになります。

・S3にCloudFrontによるコンテンツ配信を構成して、AWS WAF を利用してReferer制限を実装することができます。AWS WAF は、CloudFront に転送される HTTP および HTTPS リクエストをモニタリングして、コンテンツへのアクセスを制御可能にするウェブアプリケーションファイアウォールです。AWS WAFのReferer制限によって直接にURLリンクを参照することを制限することができます。

オリジンアクセスアイデンティティ(OAI)
S3バケットをオリジンに指定した場合、OAIを利用してオリジンへの直接的なアクセスを拒否し、CloudFrontを経由したアクセスのみ許可するように制限することが可能です。そうすることでプライベート性の高いコンテンツを安全に配信できます。

・Secure File Transfer Protocol (SFTP) を使用して Amazon S3 との間でファイルを直接転送することができます。

CORS
アプリケーション上で複数ドメインからのコンテンツアクセスをS3バケットに許可する際に利用する仕組み

ライフサイクル管理
「NonCurrentVersion」有効期限ポリシーと「ExpiredObjectDeleteMarker」ポリシーを有効にして、以前のバージョンのオブジェクトを期限切れにすることです。そして、バケット内に関連するデータオブジェクトが存在しないマーカーを削除します。
※MFA Deleteが有効だと設定が不可

s3:Get*とs3:List*という参照処理が許可されているという設定。AmazonS3ReadOnlyAccessの設定。

バケットポリシー
バケットのみに設定されるアクセス制御ですが、
ACL
バケットとオブジェクトの両方に設定することができます。
ACLではバケット単位のACLの設定に関係なくオブジェクト単位のACLが優先されるように設定されます。つまり、バケットACLでパブリックアクセスを許可しない設定することに加えて、オブジェクトについてもACLでパブリックアクセスを許可していないことが必要となります。

このようにACLの設定は非常に面倒であったため、追加されたのが S3のパブリックアクセス設定機能です。 
S3 の パブリックアクセス設定機能
バケットレベルまたはアカウントレベルで、すべてのオブジェクトへのパブリックアクセスをブロックできます。この機能でブロックを有効化することでS3バケット全体に対してパブリックアクセスを拒否することができます。

・デフォルトでは、すべての Amazon S3 リソースはプライベートであるため、リソースを作成した AWS アカウントだけがアクセスできます。
これらのオブジェクトへのWEBアクセスを許可するには、s3:GetObject アクセス許可を条件付きで付与するバケットポリシーを追加する方法があります。条件としては、aws:Referer キーを使用して、GET リクエストが特定のウェブページから発生する必要があることを指定します。